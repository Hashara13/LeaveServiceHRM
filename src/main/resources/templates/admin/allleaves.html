<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>All Leave Requests</title>
    <style>
        body{font-family:Arial;background:#eef1f6;margin:0;display:flex;}
        .sidebar{width:250px;background:#2d3748;color:#fff;height:100vh;position:fixed;padding:20px 0;}
        .sidebar h3{padding:0 20px;font-size:20px;margin:20px 0;}
        .sidebar a{display:block;padding:12px 20px;color:#cbd5e0;text-decoration:none;font-size:15px;}
        .sidebar a:hover{background:#1a202c;color:#fff;}
        .sidebar .active{background:#1a202c;color:#fff;}
        .main{margin-left:250px;padding:30px;width:100%;box-sizing:border-box;}
        .top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;}
        h2{margin:0;font-size:26px;color:#2d3748;}

        .datetime-card{
            background:#fff;
            padding:16px 24px;
            border-radius:12px;
            box-shadow:0 3px 10px rgba(0,0,0,0.08);
            margin-bottom:25px;
            display:inline-block;
            font-size:15px;
            color:#2d3748;
            border-left:5px solid #2d6cdf;
        }
        .datetime-card .date{font-size:20px;margin-bottom:4px;}
        .datetime-card .time{font-size:24px;font-weight:300;letter-spacing:1px;color:#2d6cdf;}

        table{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 3px 10px rgba(0,0,0,0.1);}
        th{background:#2d3748;color:#fff;padding:16px;font-size:15px;}
        td{padding:14px;border-bottom:1px solid #e9ecef;font-size:14px;}
        tr:hover{background:#f7f9fc;}
        .badge{padding:6px 12px;border-radius:5px;font-size:12px;color:#fff;text-transform:uppercase;}
        .pending{background:#f0ad4e;}.approved{background:#28a745;}.rejected{background:#dc3545;}
        .btn{padding:8px 14px;border-radius:5px;text-decoration:none;color:#fff;font-size:13px;margin:0 4px;}
        .approve{background:#28a745;}.reject{background:#dc3545;}.disabled{background:#6c757d;pointer-events:none;}
    </style>
</head>
<body>
<div class="sidebar">
    <h3>HRM System</h3>
    <strong style="padding:0 20px;font-size:13px;color:#718096;">ADMIN SECTION</strong>
    <a href="/admin/requests" class="active">All Leave Requests</a>
    <strong style="padding:0 20px;font-size:13px;color:#718096;margin-top:20px;display:block;">EMPLOYEE SECTION</strong>
    <a href="/employee/myleaves">My Leaves</a>
    <a href="/employee/apply">Apply Leave</a>
    <a href="/logout" style="margin-top:40px;">Logout</a>
</div>

<div class="main">
    <div class="top-bar">
        <h2>All Leave Requests</h2>
    </div>

    <div class="datetime-card">
        <div class="date" id="currentDate"></div>
        <div class="time" id="currentTime"></div>
    </div>

    <table>
        <thead>
        <tr>
            <th>ID</th><th>Employee</th><th>From</th><th>To</th><th>Reason</th><th>Status</th><th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="leave : ${leaves}">
            <td th:text="${leave.id}"></td>
            <td th:text="${leave.employeeName}"></td>
            <td th:text="${leave.fromDate}"></td>
            <td th:text="${leave.toDate}"></td>
            <td th:text="${leave.reason}"></td>
            <td><span class="badge" th:classappend="${leave.status.name().toLowerCase()}" th:text="${leave.status}"></span></td>
            <td>
                <a th:if="${leave.status.name() == 'PENDING'}" th:href="@{'/admin/approve/' + ${leave.id}}" class="btn approve">Approve</a>
                <a th:if="${leave.status.name() == 'PENDING'}" th:href="@{'/admin/reject/' + ${leave.id}}" class="btn reject">Reject</a>
                <a th:if="${leave.status.name() != 'PENDING'}" class="btn disabled">No Action</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<script>
    function updateClock() {
        const now = new Date();

        const optionsDate = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const dateStr = now.toLocaleDateString(undefined, optionsDate);

        const timeStr = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});

        document.getElementById('currentDate').textContent = dateStr;
        document.getElementById('currentTime').textContent = timeStr;
    }

    updateClock();
    setInterval(updateClock, 1000);
</script>
</body>
</html>