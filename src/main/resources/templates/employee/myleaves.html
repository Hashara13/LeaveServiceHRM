<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>My Leaves</title>
    <style>
        body{font-family:Arial;background:#eef1f6;margin:0;display:flex;}
        .sidebar{width:250px;background:#2d3748;color:#fff;height:100vh;position:fixed;padding:20px 0;}
        .sidebar h3{padding:0 20px;font-size:20px;margin:20px 0;}
        .sidebar a{display:block;padding:12px 20px;color:#cbd5e0;text-decoration:none;font-size:15px;}
        .sidebar a:hover{background:#1a202c;color:#fff;}
        .sidebar .active{background:#1a202c;color:#fff;}
        .main{margin-left:250px;padding:30px;width:100%;box-sizing:border-box;}

        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        .apply-btn {
            background:#2d6cdf;
            color:#fff;
            padding:10px 20px;
            border-radius:8px;
            text-decoration:none;
            font-size:14px;
            font-weight:bold;
            box-shadow:0 2px 6px rgba(45,108,223,0.3);
        }
        .apply-btn:hover{background:#1e4ead;}

        /* Beautiful Date & Time Card - same as admin page */
        .datetime-card{
            background:#fff;
            padding:16px 24px;
            border-radius:12px;
            box-shadow:0 3px 10px rgba(0,0,0,0.08);
            margin-bottom:25px;
            display:inline-block;
            font-size:15px;
            color:#2d3748;
            border-left:5px solid #2d6cdf;
        }
        .datetime-card .date{font-size:20px;font-weight:bold;margin-bottom:4px;}
        .datetime-card .time{font-size:24px;font-weight:300;letter-spacing:1px;color:#2d6cdf;}

        table{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 3px 10px rgba(0,0,0,0.1);}
        th{background:#2d3748;color:#fff;padding:16px;font-size:15px;text-align:left;}
        td{padding:14px;border-bottom:1px solid #e9ecef;font-size:14px;}
        tr:hover{background:#f7f9fc;}
        .btn{padding:8px 14px;border-radius:5px;text-decoration:none;font-size:13px;margin:0 5px;}
        .edit{background:#2d6cdf;color:#fff;}
        .delete{background:#dc3545;color:#fff;}
    </style>
</head>
<body>
<div class="sidebar">
    <h3>HRM System</h3>
    <strong style="padding:0 20px;font-size:13px;color:#718096;">EMPLOYEE SECTION</strong>
    <a href="/employee/myleaves" class="active">My Leaves</a>
    <a href="/employee/apply">Apply Leave</a>
    <strong style="padding:0 20px;font-size:13px;color:#718096;margin-top:20px;display:block;">ADMIN SECTION</strong>
    <a href="/admin/leaves">All Requests</a>
    <a href="/logout" style="margin-top:40px;">Logout</a>
</div>

<div class="main">
    <div class="header-bar">
        <h2>My Leaves <span th:text="${username}"></span></h2>
        <a href="/employee/apply" class="apply-btn">+ Leave</a>
    </div>

    <div class="datetime-card">
        <div class="date" id="currentDate"></div>
        <div class="time" id="currentTime"></div>
    </div>

    <table>
        <tr>
            <th>ID</th><th>From</th><th>To</th><th>Reason</th><th>Status</th><th>Actions</th>
        </tr>
        <tr th:each="l : ${leaves}">
            <td th:text="${l.id}"></td>
            <td th:text="${l.fromDate}"></td>
            <td th:text="${l.toDate}"></td>
            <td th:text="${l.reason}"></td>
            <td th:text="${l.status}"></td>
            <td>
                <span th:if="${l.status.name() == 'PENDING'}">
                    <a th:href="@{/employee/edit/{id}(id=${l.id})}" class="btn edit">Edit</a>
                    <a th:href="@{/employee/delete/{id}(id=${l.id})}" onclick="return confirm('Delete this leave request?')" class="btn delete">Delete</a>
                </span>
                <span th:if="${l.status.name() != 'PENDING'}" style="color:#888;">-</span>
            </td>
        </tr>
    </table>
</div>

<script>
    function updateClock() {
        const now = new Date();
        const optionsDate = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const dateStr = now.toLocaleDateString(undefined, optionsDate);
        const timeStr = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});

        document.getElementById('currentDate').textContent = dateStr;
        document.getElementById('currentTime').textContent = timeStr;
    }
    updateClock();
    setInterval(updateClock, 1000);
</script>
</body>
</html>